<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/tests/test_graph.py">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/tests/test_graph.py" />
              <option name="updatedContent" value="import types&#10;import pytest&#10;&#10;from graph import graph as rg&#10;from graph.node_constants import WEBSEARCH, RETRIEVE, GENERATE&#10;&#10;&#10;def test_route_question_routes_to_websearch(monkeypatch):&#10;    # Patch question_router.invoke to return an object with datasource == WEBSEARCH&#10;    monkeypatch.setattr(rg, &quot;question_router&quot;, types.SimpleNamespace(invoke=lambda input: types.SimpleNamespace(datasource=WEBSEARCH)))&#10;    state = {}&#10;    result = rg.route_question(state)&#10;    assert result == WEBSEARCH&#10;&#10;&#10;def test_route_question_routes_to_retrieve(monkeypatch):&#10;    # Patch question_router.invoke to return an object with datasource == 'vectorstore'&#10;    monkeypatch.setattr(rg, &quot;question_router&quot;, types.SimpleNamespace(invoke=lambda input: types.SimpleNamespace(datasource=&quot;vectorstore&quot;)))&#10;    state = {}&#10;    result = rg.route_question(state)&#10;    assert result == RETRIEVE&#10;&#10;&#10;def test_decide_to_generate_prefers_websearch_when_flag_set():&#10;    state = {&quot;web_search&quot;: True}&#10;    assert rg.decide_to_generate(state) == WEBSEARCH&#10;&#10;&#10;def test_decide_to_generate_generates_when_no_web_search():&#10;    state = {&quot;web_search&quot;: False}&#10;    assert rg.decide_to_generate(state) == GENERATE&#10;&#10;&#10;def test_grade_generation_hallucination_false(monkeypatch):&#10;    # If hallucination_grader.invoke returns object with binary_score falsy -&gt; 'not supported'&#10;    monkeypatch.setattr(rg, &quot;hallucination_grader&quot;, types.SimpleNamespace(invoke=lambda input: types.SimpleNamespace(binary_score=False)))&#10;    state = {&quot;question&quot;: &quot;q&quot;, &quot;documents&quot;: [], &quot;generation&quot;: &quot;g&quot;}&#10;    assert rg.grade_generation_grounded_in_documents_and_question(state) == &quot;not supported&quot;&#10;&#10;&#10;def test_grade_generation_grounded_and_answer_useful(monkeypatch):&#10;    # hallucination true, answer_grader returns binary_score True -&gt; 'useful'&#10;    monkeypatch.setattr(rg, &quot;hallucination_grader&quot;, types.SimpleNamespace(invoke=lambda input: types.SimpleNamespace(binary_score=True)))&#10;    monkeypatch.setattr(rg, &quot;answer_grader&quot;, types.SimpleNamespace(invoke=lambda input: types.SimpleNamespace(binary_score=True)))&#10;    state = {&quot;question&quot;: &quot;q&quot;, &quot;documents&quot;: [&quot;d&quot;], &quot;generation&quot;: &quot;g&quot;}&#10;    assert rg.grade_generation_grounded_in_documents_and_question(state) == &quot;useful&quot;&#10;&#10;&#10;def test_grade_generation_grounded_but_not_answering(monkeypatch):&#10;    # hallucination true, answer_grader returns binary_score False -&gt; 'not useful'&#10;    monkeypatch.setattr(rg, &quot;hallucination_grader&quot;, types.SimpleNamespace(invoke=lambda input: types.SimpleNamespace(binary_score=True)))&#10;    monkeypatch.setattr(rg, &quot;answer_grader&quot;, types.SimpleNamespace(invoke=lambda input: types.SimpleNamespace(binary_score=False)))&#10;    state = {&quot;question&quot;: &quot;q&quot;, &quot;documents&quot;: [&quot;d&quot;], &quot;generation&quot;: &quot;g&quot;}&#10;    assert rg.grade_generation_grounded_in_documents_and_question(state) == &quot;not useful&quot;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/tests/test_project_files.py">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/tests/test_project_files.py" />
              <option name="updatedContent" value="import os&#10;import importlib&#10;&#10;&#10;def test_readme_exists():&#10;    assert os.path.isfile(&quot;README.md&quot;), &quot;README.md must exist at project root&quot;&#10;&#10;&#10;def test_requirements_contains_streamlit():&#10;    assert os.path.isfile(&quot;requirements.txt&quot;), &quot;requirements.txt must exist&quot;&#10;    with open(&quot;requirements.txt&quot;, &quot;r&quot;, encoding=&quot;utf-8&quot;) as f:&#10;        req = f.read().lower()&#10;    assert &quot;streamlit&quot; in req, &quot;requirements.txt should include streamlit&quot;&#10;&#10;&#10;def test_graph_module_has_expected_functions():&#10;    # Import the compiled graph module and check key functions are present&#10;    mod = importlib.import_module(&quot;graph.graph&quot;)&#10;    for name in (&quot;route_question&quot;, &quot;decide_to_generate&quot;, &quot;grade_generation_grounded_in_documents_and_question&quot;):&#10;        assert hasattr(mod, name), f&quot;graph.graph should define {name}&quot;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>